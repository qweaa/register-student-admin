(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-436d"],{"/K6Q":function(t,e,o){"use strict";o.d(e,"c",function(){return i}),o.d(e,"b",function(){return a}),o.d(e,"d",function(){return n}),o.d(e,"a",function(){return l});var r=o("t3Un");function i(t){return Object(r.a)({url:"/index.php/index/Dormitorycontroller/getAllDormitoryByBuilding",method:"post",params:{building:t}})}function a(t){return Object(r.a)({url:"/index.php/index/Dormitorycontroller/deleteDormitoryById",method:"post",data:{dormitoryId:t}})}function n(t){var e=t.dormitoryId,o=t.dormitoryName;return Object(r.a)({url:"/index.php/index/Dormitorycontroller/updateDormitoryById",method:"post",data:{dormitoryId:e,dormitoryName:o}})}function l(t){var e=t.dormitoryName,o=t.building,i=t.specialtyId,a=t.specialtyName,n=t.dept;return Object(r.a)({url:"/index.php/index/Dormitorycontroller/addDormitory",method:"post",data:{dormitoryName:e,building:o,specialtyId:i,specialtyName:a,dept:n}})}},"69Nf":function(t,e,o){var r=o("f4ri"),i=r.JSON||(r.JSON={stringify:JSON.stringify});t.exports=function(t){return i.stringify.apply(i,arguments)}},Vagu:function(t,e,o){"use strict";o.r(e);var r=o("omC7"),i=o.n(r),a=o("/K6Q"),n={data:function(){return{tableData:[],tableDataIndex:0,formVisible:!1,dept:"",form:{dormitoryName:""}}},methods:{getList:function(t){var e=this;Object(a.c)(t).then(function(t){e.tableData=t.data})},del:function(t,e){var o=this;this.$confirm("此操作将永久删除该宿舍信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(a.b)(e).then(function(e){o.tableData.splice(t,1),o.$message({type:"success",message:"删除成功!"})})}).catch()},edit:function(t){this.tableDataIndex=t,this.formVisible=!0},submitUpdate:function(){var t=this,e=JSON.parse(i()(this.form));for(var o in e)if(""===e[o])return void this.$message({type:"warning",message:"表单不能为空"});e.dormitoryId=this.tableData[this.tableDataIndex].dormitoryId,Object(a.d)(e).then(function(o){t.$message({type:"success",message:"修改成功"}),t.tableData[t.tableDataIndex].dormitoryName=e.dormitoryName,t.formVisible=!1})}},created:function(){this.$route.query.dept&&(this.dept=this.$route.query.dept,this.getList(this.$route.query.dept))}},l=o("ZrdR"),d=Object(l.a)(n,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-container",[o("el-main",[o("div",{staticStyle:{"line-height":"60px","font-size":"16px"}},[t._v("宿舍楼："+t._s(t.$route.query.dept))]),t._v(" "),o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[o("el-table-column",{attrs:{prop:"dormitoryId",label:"ID",width:"180"}}),t._v(" "),o("el-table-column",{attrs:{prop:"dept",label:"系别"}}),t._v(" "),o("el-table-column",{attrs:{prop:"specialtyName",label:"专业"}}),t._v(" "),o("el-table-column",{attrs:{prop:"dormitoryName",label:"宿舍"}}),t._v(" "),o("el-table-column",{attrs:{prop:"population",label:"人数"}}),t._v(" "),o("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){t.edit(e.$index,e.row.dormitoryId)}}},[t._v("编辑")]),t._v(" "),o("el-button",{staticStyle:{color:"#F56C6C"},attrs:{type:"text",size:"small"},on:{click:function(o){t.del(e.$index,e.row.dormitoryId)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),o("el-dialog",{attrs:{title:"修改宿舍信息",visible:t.formVisible},on:{"update:visible":function(e){t.formVisible=e}}},[o("el-form",{attrs:{"label-width":"80px"}},[o("el-form-item",{attrs:{label:"宿舍名"}},[o("el-input",{model:{value:t.form.dormitoryName,callback:function(e){t.$set(t.form,"dormitoryName",e)},expression:"form.dormitoryName"}})],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.formVisible=!1}}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.submitUpdate}},[t._v("确 定")])],1)],1)],1)},[],!1,null,null,null);d.options.__file="dormitory.vue";e.default=d.exports},omC7:function(t,e,o){t.exports={default:o("69Nf"),__esModule:!0}}}]);